<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="testSpringBoot.mapper.LibraryBoardMapper">

	<sql id="basecolumn">
		BOARD_NUM,USER_ID,BOARD_NAME,BOARD_PASS,BOARD_SUBJECT,BOARD_CONTENT,BOARD_DATE,
		IP_ADDR, READ_COUNT, ORIGINAL_FILE_NAME,STORE_FILE_NAME,FILE_SIZE
	</sql>
	
	<insert id = "libraryInsert" parameterType="testSpringBoot.domain.LibraryBoardDTO">
		insert into LIBRARYBOARD ( <include refid="basecolumn" /> )
		values(NUM_SEQ.nextval,#{userId},#{boardName},#{boardPass},
		#{boardSubject},#{boardContent},sysdate,#{ipAddr},
		0,#{originalFileName},#{storeFileName},#{fileSize})
	</insert>
	
	<select id = "getLibraryBoardList" resultMap="baseLibrary">
		select *
			from(select rownum rn, <include refid="basecolumn" />
				from(select <include refid="basecolumn" />
					from LIBRARYBOARD
					order by board_date desc))
			where rn between #{startPage} and #{endPage}
	</select>
</mapper>	